"use strict";(self["webpackChunkvue2_shevvy_shopping"]=self["webpackChunkvue2_shevvy_shopping"]||[]).push([[918],{5918:function(t,s,a){a.r(s),a.d(s,{default:function(){return p}});a(7658);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"user"},[s("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[t.isLogin?s("div",{staticClass:"head-page"},[s("div",{staticClass:"head-img",on:{click:function(s){return t.$router.push("/userinfo")}}},[s("img",{attrs:{src:t.detail.avatar_url||t.defaultAvatar,alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"mobile"},[t._v(t._s(t.detail.mobile))]),s("div",{staticClass:"vip"},[s("van-icon",{attrs:{name:"diamond-o"}}),t._v(" 普通会员 ")],1)])]):s("div",{staticClass:"head-page",on:{click:function(s){return t.$router.push("/login")}}},[s("div",{staticClass:"head-img"},[s("img",{attrs:{src:a(6945),alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"mobile"},[t._v("未登录")]),s("div",{staticClass:"words"},[t._v("点击登录账号")])])]),s("div",{staticClass:"my-asset"},[s("div",{staticClass:"asset-left"},[s("div",{staticClass:"asset-left-item"},[s("span",[t._v(t._s(t.detail.balance||0))]),s("span",[t._v("账户余额")])]),s("div",{staticClass:"asset-left-item"},[s("span",[t._v("0")]),s("span",[t._v("积分")])]),s("div",{staticClass:"asset-left-item"},[s("span",[t._v("0")]),s("span",[t._v("优惠券")])])]),s("div",{staticClass:"asset-right"},[s("div",{staticClass:"asset-right-item"},[s("van-icon",{attrs:{name:"balance-pay"}}),s("span",[t._v("我的钱包")])],1)])]),s("div",{staticClass:"order-navbar"},[s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/myorder?dataType=all")}}},[s("van-icon",{attrs:{name:"balance-list-o"}}),s("span",[t._v("全部订单")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/myorder?dataType=payment")}}},[s("van-badge",{attrs:{content:t.counts.payment}},[s("van-icon",{attrs:{name:"clock-o"}})],1),s("span",[t._v("待支付")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/myorder?dataType=delivery")}}},[s("van-badge",{attrs:{content:t.counts.delivery}},[s("van-icon",{attrs:{name:"logistics"}})],1),s("span",[t._v("待发货")])],1),s("div",{staticClass:"order-navbar-item",on:{click:function(s){return t.$router.push("/myorder?dataType=received")}}},[s("van-badge",{attrs:{content:t.counts.received}},[s("van-icon",{attrs:{name:"send-gift-o"}})],1),s("span",[t._v("待收货")])],1)]),s("div",{staticClass:"service"},[s("div",{staticClass:"title"},[t._v("我的服务")]),s("div",{staticClass:"content"},[s("div",{staticClass:"content-item",on:{click:function(s){return t.$router.push("/address")}}},[s("van-icon",{attrs:{name:"records"}}),s("span",[t._v("收货地址")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"gift-o"}}),s("span",[t._v("领券中心")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"gift-card-o"}}),s("span",[t._v("优惠券")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"question-o"}}),s("span",[t._v("我的帮助")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"balance-o"}}),s("span",[t._v("我的积分")])],1),s("div",{staticClass:"content-item"},[s("van-icon",{attrs:{name:"refund-o"}}),s("span",[t._v("退换/售后")])],1)])]),t.isLogin?s("div",{staticClass:"logout-btn"},[s("button",{on:{click:t.onLogout}},[t._v("退出登录")])]):t._e()])],1)},e=[],n=(a(5239),a(4117)),o=a(8042);const r=()=>o.Z.get("/user/info");var c=a(7535),d=a(6945),l={name:"UserPage",data(){return{detail:{},defaultAvatar:d,counts:{},isLoading:!1}},created(){this.isLogin&&(this.getUserInfoDetail(),this.getOrderTodoCounts())},computed:{isLogin(){return this.$store.getters.token}},methods:{async getUserInfoDetail(){const{data:{userInfo:t}}=await r();this.detail=t},onLogout(){n.Z.confirm({title:"温馨提示",message:"您确定需要退出登录么？"}).then((()=>{this.$store.dispatch("user/logout"),this.$router.replace("/login"),location.reload()})).catch((()=>{}))},async getOrderTodoCounts(){const{data:{counts:t}}=await(0,c.wE)();this.counts=t},onRefresh(){this.isLoading=!0,setTimeout((()=>{location.reload(),this.isLoading=!1}),900)}}},v=l,u=a(1001),m=(0,u.Z)(v,i,e,!1,null,"3b05611d",null),p=m.exports}}]);
//# sourceMappingURL=918.2a7a56e0.js.map